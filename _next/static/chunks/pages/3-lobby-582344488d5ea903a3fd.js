(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{419:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r,o,i=n(168),a=n(3253),s=n.n(a),u=n(642),c=(n(606),n(5893));function l(e){var t=e.isOpen,n=e.onRequestClose,a=e.children;return(0,c.jsxs)(s(),{isOpen:t,onRequestClose:n,style:{content:{width:"50%",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",display:"flex",justifyContent:"center",maxHeight:"70%",maxWidth:"70%",minHeight:"70%",margin:0,position:"relative",padding:0,border:"4px solid #2a2a2a",backgroundColor:"rgba(41,35,28,1)"}},children:[(0,c.jsx)("div",{className:(0,u.iv)(r||(r=(0,i.Z)(["\n        color: white;\n        position: relative;\n        margin-top: 40px;\n      "]))),children:a}),(0,c.jsx)("button",{className:(0,u.iv)(o||(o=(0,i.Z)(["\n        position: absolute;\n        cursor: pointer;\n        text-decoration: underline;\n        top: 12px;\n        right: 12px;\n        color: #fff;\n        background: none;\n        border: none;\n        font-family: 'Cinzel';\n      "]))),onClick:n,children:"CLOSE"})]})}s().setAppElement("#__next")},5534:function(e,t,n){"use strict";var r=n(7294);t.Z=function(e){(0,r.useEffect)((function(){setTimeout((function(){e()}),5e3)}),[])}},7306:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r,o=n(168),i=n(4942),a=n(419),s=n(7294),u=n(5802),c=n(3413),l=n(642),f=n(1163),p=n(606),d=n(291),g=n(5534),h=n(5893);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=[{url:"".concat(p.O4,"/p3/bg2.png"),offset:.002,offsetX:0,offsetY:1,img:null,ratio:0},{url:"".concat(p.O4,"/p3/bg1.png"),offset:.002,offsetX:0,offsetY:1,img:null,ratio:0,passedFrameToShow:{dir:"in",alpha:0,delay:120}},{url:"".concat(p.O4,"/p3/d1.png"),offset:.01,offsetX:0,offsetY:0,img:null,ratio:0,fadeLoop:{dir:"out",alpha:1}},{url:"".concat(p.O4,"/p3/d3.png"),offset:.01,offsetX:0,offsetY:0,img:null,ratio:0,fadeLoop:{dir:"out",alpha:1}}],v=[{w:150,h:200,offsetX:218,offsetY:190,targetName:"r8"},{w:150,h:200,offsetX:418,offsetY:190,targetName:"r7"},{w:350,h:200,offsetX:-318,offsetY:200,targetName:"r6"},{w:340,h:200,offsetX:110,offsetY:200,targetName:"r5"},{w:200,h:200,offsetX:-340,offsetY:190,targetName:"r4"},{w:200,h:80,offsetX:-18,offsetY:112,targetName:"r3"},{w:300,h:100,offsetX:440,offsetY:130,targetName:"r1"},{w:350,h:200,offsetX:10,offsetY:200,targetName:"r2"}],b=function(e,t,n){var r=t+.02*("in"===e?1:-1)*Math.random(),o=e;return r>1?(r=1,n||(o="out")):r<0&&(r=0,n||(o="in")),{dir:o,alpha:r}},k=[{id:1,person:"wei",text:"\u2026\u2026"},{id:2,person:"partner",text:"\u600e\u9ebc\u4e86\uff0c\u5e79\u561b\u6123\u5728\u90a3\uff1f\u4e0d\u6309\u96fb\u68af\u4e0a\u6a13\u55ce\uff1f"},{id:3,person:"neutral",text:"\u6211\u770b\u8457\u7ad9\u5728\u96fb\u68af\u9580\u53e3\u4e0d\u70ba\u6240\u52d5\u7684\u7dad\u771f\uff0c\u6b63\u60f3\u6e4a\u4e0a\u524d\u8a62\u554f\uff0c\u537b\u767c\u73fe\uff0c\u539f\u4f86\u96fb\u68af\u9580\u5916\u6709\u4e00\u53f0\u6307\u7d0b\u5bc6\u78bc\u9396\u3002"},{id:4,person:"wei",text:"\u624b\u501f\u6211\u4e00\u4e0b\u3002"},{id:5,person:"partner",text:"\u6211\uff1f\u6b38\u2014\u2014\u59b3\u5e79\u561b\u2014\u2014"},{id:6,person:"neutral",text:"\u7dad\u771f\u6293\u904e\u6211\u7684\u624b\u6307\u60f3\u8a66\u8457\u89e3\u9396\u3002"},{id:7,person:"neutral",text:"\u624b\u653e\u5728\u89e3\u9396\u756b\u9762\u534a\u664c\uff0c\u8d77\u5148\u770b\u8d77\u4f86\u6c92\u4ec0\u9ebc\u52d5\u975c\uff0c\u6211\u6b63\u6253\u7b97\u57cb\u6028\u5e7e\u53e5\u6642\uff0c\u6307\u7d0b\u5bc6\u78bc\u9396\u537b\u50b3\u4f86\u7d30\u5fae\u7684\u6a5f\u68b0\u904b\u4f5c\u8072\u3002"},{id:8,person:"neutral",text:"\u300c\u6ef4\u6ef4\u2014\u2014\u300d"},{id:9,person:"neutral",text:"\u87a2\u5e55\u756b\u9762\u986f\u793a\u51fa\u300c\u53ef\u901a\u884c\u300d\u7684\u5b57\u773c\u3002\u756b\u9762\u4e2d\u98db\u5feb\u5730\u9583\u904e\u6211\u7684\u500b\u4eba\u8cc7\u6599\uff1a\u59d3\u540d\u3001\u8eab\u5206\u8b49\u5b57\u865f\u3001\u51fa\u751f\u5e74\u6708\u65e5\uff0c\u9084\u6709\u5224\u65b7\u662f\u5426\u6709\u524d\u79d1\u7684\u8b49\u660e\uff0c\u5c31\u50cf\u826f\u6c11\u8b49\u4e00\u6a23\u3002",isBlock:!0,block:{btnText:"\u826f\u6c11\u8b49"}},{id:10,person:"neutral",text:"\u4e00\u80a1\u60e1\u5bd2\u5f9e\u6211\u7684\u5fc3\u5e95\u7ac4\u8d77\uff0c\u51b7\u4e0d\u4f4f\u6253\u4e86\u500b\u54c6\u55e6\u3002"},{id:11,person:"partner",text:"\u9019\u4ec0\u9ebc\u9b3c\uff0c\u70ba\u4ec0\u9ebc\u6703\u6709\u6211\u7684\u8cc7\u6599\uff1f\u611f\u89ba\u8d85\u4e0d\u8212\u670d\u7684\u3002"},{id:12,person:"wei",text:"\u800c\u4e14\u98ef\u5e97\u88e1\u4e0d\u61c9\u8a72\u6709\u6307\u7d0b\u9396\u9019\u7a2e\u6771\u897f\u5427\uff1f"},{id:13,person:"partner",text:"\u6b38\uff1f\u59b3\u662f\u4e0d\u662f\u767c\u73fe\u602a\u602a\u7684\uff0c\u6240\u4ee5\u624d\u62ff\u6211\u7684\u624b\u6307\u53bb\u6309\u6307\u7d0b\uff1f"},{id:14,person:"wei",text:"\u55ef\u3002"},{id:15,person:"partner",text:"\u4f60\u600e\u9ebc\u9019\u6a23\u5c0d\u6211\uff1f\u5982\u679c\u6709\u5371\u96aa\u600e\u9ebc\u8fa6\uff1f"},{id:16,person:"wei",text:"\u4e0d\u77e5\u9053\u70ba\u4ec0\u9ebc\uff0c\u7e3d\u89ba\u5f97\u9019\u500b\u6771\u897f\u662f\u5728\u91dd\u5c0d\u6211\u3002"},{id:17,person:"partner",text:"\u525b\u525b\u624d\u8aaa\u6211\u5728\u5e7b\u60f3\uff0c\u59b3\u9019\u624d\u662f\u5e7b\u60f3\u5427\uff01"}],C=[{id:1,person:"partner",text:"\u90fd\u662f\u7070\uff01\u4e0d\u77e5\u9053\u591a\u4e45\u6c92\u6709\u4eba\u4f86\u904e\u4e86\u3002"},{id:2,person:"neutral",text:"\u7dad\u771f\u4e0d\u8010\u7169\u5730\u626f\u4e0b\u63a5\u5f85\u6ac3\u6aaf\u4e0a\u7684\u5e03\u689d\uff0c\u7e5e\u9032\u6ac3\u6aaf\u5f8c\u7ffb\u627e\u8457\u62bd\u5c5c\u3002"},{id:3,person:"neutral",text:"\u6211\u5728\u4e00\u65c1\u7121\u804a\u5730\u56db\u8655\u6253\u91cf\u8457\uff0c\u6ce8\u610f\u5230\u6ac3\u6aaf\u4e0a\u4e00\u4efd\u623f\u578b\u4ecb\u7d39\uff0c\u5fcd\u4e0d\u4f4f\u597d\u5947\u7684\u60f3\u770b\u770b\u9019\u9593\u98ef\u5e97\u7684\u6709\u4e9b\u4ec0\u9ebc\u8a2d\u65bd\u3002",isBlock:!0,block:{btnText:"\u623f\u578b\u4ecb\u7d39"}},{id:4,person:"partner",text:"\u9019\u4ec0\u9ebc\u5440\u2026\u2026\u623f\u578b\u4ecb\u7d39\u90fd\u88ab\u5857\u9ed1\u4e86\u6b38\u3002"},{id:5,person:"neutral",text:"\u6211\u767c\u73fe\u7dad\u771f\u6c92\u6709\u56de\u61c9\u6211\uff0c\u4fbf\u56de\u904e\u982d\u67e5\u770b\u3002\u767c\u73fe\u5c0d\u65b9\u4ecd\u5728\u7ffb\u627e\u8457\u6ac3\u6aaf\uff0c\u4f3c\u4e4e\u6b63\u5728\u641c\u7d22\u4ec0\u9ebc\u91cd\u8981\u7684\u6771\u897f\uff0c\u6211\u628a\u623f\u578b\u4ecb\u7d39\u6298\u8d77\u4f86\u6536\u9032\u53e3\u888b\uff0c\u4e0a\u524d\u8a62\u554f\u3002"},{id:6,person:"partner",text:"\u7dad\u771f\uff0c\u59b3\u5728\u627e\u4ec0\u9ebc\uff1f"},{id:7,person:"wei",text:"\u770b\u6709\u6c92\u6709\u4ec0\u9ebc\u8cc7\u6599\u80fd\u77e5\u9053\u884c\u653f\u5340\u7684\u4f4d\u7f6e\uff0c\u4e0d\u7136\u6211\u4e5f\u4e0d\u77e5\u9053\u7d93\u7406\u8fa6\u516c\u5ba4\u5728\u54ea\u3002"},{id:8,person:"partner",text:"\u90a3\u6211\u4e5f\u4f86\u5e6b\u5fd9\u3002"},{id:9,person:"neutral",text:"\u6211\u8d70\u9032\u4e86\u6ac3\u53f0\uff0c\u770b\u5230\u4e86\u684c\u4e0a\u6563\u843d\u8457\u5404\u5f0f\u5404\u6a23\u7684\u6587\u4ef6\u3002\u5176\u4e2d\uff0c\u5f35\u8cbc\u5728\u7246\u4e0a\u7684\u300c\u54e1\u5de5\u5b88\u5247\u300d\u5438\u5f15\u4e86\u6211\u7684\u6ce8\u610f\u3002",isBlock:!0,block:{btnText:"\u54e1\u5de5\u5b88\u5247"}},{id:10,person:"partner",text:"\u5949\u516c\u5b88\u6cd5\u3001\u8b39\u8a00\u614e\u884c\u3001\u5ec9\u6f54\u81ea\u6301......\u59b3\u7238\u5c0d\u54e1\u5de5\u7684\u8981\u6c42\u597d\u602a\u5594\u3002"},{id:11,person:"wei",text:"\u4ec0\u9ebc\u8981\u6c42\uff1f"},{id:12,person:"partner",text:"\u98ef\u5e97\u7684\u54e1\u5de5\u5b88\u5247\u554a\uff0c\u59b3\u770b\u3002"},{id:13,person:"wei",text:"\u2026\u2026\u771f\u662f\u5920\u4e86\uff0c\u9019\u4e9b\u898f\u7bc4\u8ddf\u98ef\u5e97\u696d\u6709\u4ec0\u9ebc\u95dc\u4fc2\uff1f"},{id:14,person:"partner",text:"\u5c0d\u554a\uff01\u4e0d\u904e\u611f\u89ba\u8d85\u9177\u7684\uff0c\u8a72\u4e0d\u6703\u9019\u98ef\u5e97\u5176\u5be6\u662f\u4ec0\u9ebc\u795e\u79d8\u7d44\u7e54\u7684\u64da\u9ede\u5427\uff1f"},{id:15,person:"wei",text:"\u54ea\u6709\u53ef\u80fd\uff1f"},{id:16,person:"partner",text:"\u5582\uff01\u59b3\u662f\u85dd\u8853\u5bb6\u6b38\uff0c\u5c31\u4e0d\u80fd\u591a\u9ede\u60f3\u50cf\u529b\u55ce\uff1f"},{id:17,person:"wei",text:"\u60f3\u50cf\u529b\u4e0d\u662f\u7a7a\u60f3\uff01\u800c\u4e14\uff0c\u5275\u4f5c\u4e0d\u5149\u60f3\u8c61\uff0c\u9084\u9700\u8981\u900f\u904e\u56b4\u8b39\u7684\u898f\u5283\u624d\u80fd\u2014\u2014\uff08\u4e0b\u75652\u842c\u5b57\uff09"},{id:18,person:"neutral",text:"\u5929\u554a\uff0c\u53c8\u4f86\u4e86....\u8ac7\u5230\u5275\u4f5c\uff0c\u7dad\u771f\u5c31\u50cf\u6295\u5165\u4e86\u53e6\u5916\u4e00\u500b\u4e16\u754c\uff0c\u7f55\u898b\u5730\u6253\u958b\u4e86\u8a71\u5323\u5b50\u3002\u7dad\u771f\u7684\u767c\u8a00\u4f3c\u4e4e\u6c92\u6709\u76e1\u982d\uff0c\u6211\u5fcd\u4e0d\u4f4f\u51fa\u8072\u6253\u65b7\u5979\u3002"},{id:19,person:"partner",text:"\u2014\u2014 \u884c\uff0c\u6211\u5011\u5927\u85dd\u8853\u5bb6\u8aaa\u7684\u90fd\u884c\uff0c\u4f60\u908a\u8aaa\u6211\u908a\u627e\u5730\u5716\u3002"},{id:20,person:"neutral",text:"\u6c92\u591a\u4e45\uff0c\u6211\u5011\u7ffb\u51fa\u4e86\u4e00\u4efd\u7528\u4f86\u6e05\u9ede\u98ef\u5e97\u8a2d\u5099\u7684\u8cc7\u6599\u3002\u4e0a\u9762\u6a19\u793a\u4e86\u98ef\u5e97\u623f\u578b\u3001\u6d88\u9632\u8a2d\u5099\u7b49\u5206\u5e03\u60c5\u6cc1\uff0c\u5c31\u9023\u7d93\u7406\u8fa6\u516c\u5ba4\u7684\u4f4d\u7f6e\u4e5f\u6e05\u695a\u7684\u6a19\u793a\u5728\u4e0a\u9762\u3002"},{id:21,person:"wei",text:"\u627e\u5230\u4e86\uff0c\u7d93\u7406\u8fa6\u516c\u5ba4\u5728\u9802\u6a13\u3002"},{id:22,person:"partner",text:"\u90a3\u6211\u5011\u5feb\u53bb\u770b\u770b\uff01\u6211\u9084\u6c92\u770b\u904e\u7d93\u7406\u8fa6\u516c\u5ba4\u9577\u600e\u6a23\uff0c\u771f\u597d\u5947\u3002"}];function O(){var e=(0,f.useRouter)(),t=(0,s.useRef)(null),n=(0,s.useRef)(null),i=(0,s.useRef)(0),x=(0,s.useRef)(0),O=(0,s.useRef)(null),y=(0,s.useRef)(0),j=(0,s.useRef)(0),R=(0,s.useRef)({x:0,y:0}),T=(0,s.useState)(!0),E=T[0],X=T[1],S=(0,s.useState)(-1),N=(S[0],S[1]),Y=(0,s.useState)(!1),B=Y[0],L=Y[1],_=(0,s.useRef)((function(){})),P=(0,s.useState)(0),Z=P[0],A=P[1],F=(0,s.useState)(0),D=F[0],q=F[1],z=(0,s.useState)({x:0,y:0}),H=z[0],I=z[1],W=(0,s.useRef)(null),M=(0,s.useCallback)((function(e){R.current.x=e.pageX,R.current.y=e.pageY}),[]),G=(0,s.useCallback)((function(){t.current.width=window.innerWidth,t.current.height=window.innerHeight,n.current=t.current.getContext("2d"),i.current=t.current.width,x.current=t.current.height,O.current=t.current.getBoundingClientRect()}),[]),J=(0,s.useCallback)((function(e,t){console.log("onblock in page level called",e,t),N(t),_.current=e,console.log(C[t])}),[]),K=((0,s.useRef)(0),(0,s.useRef)(1),(0,s.useRef)(0)),Q=(0,s.useCallback)((function(){n.current.clearRect(0,0,i.current,x.current),n.current.fillStyle="#1B323D",n.current.globalCompositeOperation="source-over",n.current.fillRect(0,0,i.current,x.current);for(var e=0;e<w.length;e+=1){var t=R.current.x-i.current/2,r=R.current.y-x.current/2,o=w[e].img.height*j.current,a=o*w[e].ratio;if(0===e){n.current.save(),n.current.beginPath();var s=i.current/2-a/2;n.current.moveTo(s,0),n.current.lineTo(a+s,0),n.current.lineTo(a+s,x.current),n.current.lineTo(s,x.current),n.current.lineTo(s,0),n.current.closePath(),n.current.clip()}if(w[e].fade){var u=w[e].fade,c=u.dir,l=u.alpha,f=b(c,l,!0);console.log("fade",f),n.current.globalAlpha=f.alpha,w[e].fade=m(m({},w[e].fade),f)}if(w[e].passedFrameToShow)if(K.current+=1,w[e].passedFrameToShow.delay<K.current){var p=w[e].passedFrameToShow,d=p.dir,g=p.alpha,h=b(d,g,!0);n.current.globalAlpha=h.alpha,w[e].passedFrameToShow=m(m({},w[e].passedFrameToShow),h)}else n.current.globalAlpha=0;if(w[e].fadeLoop){var v=w[e].fadeLoop,k=v.dir,C=v.alpha,O=b(k,C);n.current.globalAlpha=O.alpha,w[e].fadeLoop=m(m({},w[e].fadeLoop),O)}n.current.drawImage(w[e].img,i.current/2-a/2+w[e].offsetX*j.current+t*w[e].offset,x.current/2-o/2+w[e].offsetY*j.current+r*w[e].offset,a,o),n.current.globalAlpha=1}n.current.restore(),requestAnimationFrame(Q)}),[]),U=(0,s.useCallback)((function(e){return function(t){y.current+=1,w[e].ratio=w[e].img.width/w[e].img.height,console.log("img",t,t.currentTarget.width),0===e&&(j.current=x.current/w[e].img.height),y.current==w.length&&(X(!1),Q())}}),[Q]),V=(0,s.useCallback)((function(){console.log("onRequestClose"),L(!1),0===Z&&_.current()}),[Z]),$=(0,s.useRef)(0),ee=(0,s.useCallback)((function(e){var t;q(!1),console.log(e.pageX,e.pageY,O);var n=e.pageX-i.current/2,r=e.pageY-x.current/2;v.forEach((function(e,o){if(!t){var i=e.w,a=e.h,s=e.offsetX,u=e.offsetY,c=e.targetStep;console.log(Z,c);var l=n-s,f=r-u;if(l<i/2&&l>-i/2&&f<a/2&&f>-a/2){console.log("boom");var p=w.find((function(t){return t.name===e.targetName}));p.fade||(t=!0,$.current+=1,p.fade={alpha:1,dir:"out"})}}})),$.current===v.length&&(console.log("cleared"),A(2)),t||W.current&&(I({x:e.pageX-W.current.getBoundingClientRect().width/2,y:e.pageY}),setTimeout((function(){return q(!0)})))}),[Z]);(0,s.useEffect)((function(){for(var e=0;e<w.length;e+=1){var t=new Image;t.src=w[e].url,t.onload=U(e),w[e].img=t}}),[U]),(0,s.useEffect)((function(){var e=t.current;return e.addEventListener("click",ee),function(){e.removeEventListener("click",ee)}}),[ee]),(0,s.useEffect)((function(){return G(),window.addEventListener("mousemove",M),window.addEventListener("resize",G),function(){window.removeEventListener("mousemove",M),window.removeEventListener("resize",G)}}),[G,M]);var te=(0,s.useState)(!1),ne=te[0],re=te[1],oe=(0,s.useCallback)((function(){0===Z&&(re(!0),setTimeout((function(){e.push("/4-elevator")}),3e3)),4===Z&&(re(!0),setTimeout((function(){e.push("/1-1-entrance-gate")}),3e3))}),[Z]),ie=(0,s.useState)(!1),ae=ie[0],se=ie[1];return(0,g.Z)((function(){se(!0)})),(0,h.jsxs)("div",{className:(0,l.iv)(r||(r=(0,o.Z)(["\n      position: relative;\n      width: 100%;\n      height: 100vh;\n      display: flex;\n      transition: all 3000ms ease-in-out;\n      opacity: ",";\n      overflow: hidden;\n    "])),ne?0:1),children:[E&&(0,h.jsx)("div",{style:{position:"absolute",top:"40%",textAlign:"center",width:"100%",animationName:"blink",animationDuration:"3s",animationIterationCount:"infinite"},children:"loading"}),(0,h.jsxs)("div",{style:{animation:E?"":"3s 1 fadein"},children:[(0,h.jsx)("canvas",{ref:t,width:"100%",height:"100%"}),!E&&0===Z&&ae&&(0,h.jsx)(u.Z,{paragraphs:k,onClick:function(){A(3)},onBlock:J,onBlockBtnClick:function(){console.log("onBlockBtnClick"),L(!0)},onContiClick:function(){re(!0),setTimeout((function(){e.push("/4-elevator")}),3e3)}}),!E&&Z>=2&&(0,h.jsx)(u.Z,{paragraphs:C,onClick:function(){A(3)},onBlock:J,onBlockBtnClick:function(){console.log("onBlockBtnClick"),2===Z&&A(3),4===Z&&L(!0)},onEnd:oe})]}),Z>0&&(0,h.jsx)(d.Z,{ref:W,triggered:D,popupLoc:H}),(0,h.jsx)(a.Z,{isOpen:B,onRequestClose:V,children:(0,h.jsx)(p.ZP,{src:"".concat(p.O4,"/p3/b1.png"),alt:"\u826f\u6c11\u8b49",width:825/755*600,height:"600"})}),3===Z&&(0,h.jsx)(c.Z,{onClose:function(){A(4),_.current()}})]})}},2313:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/3-lobby",function(){return n(7306)}])}},function(e){e.O(0,[774,887,152,585,888,179],(function(){return t=2313,e(e.s=t);var t}));var t=e.O();_N_E=t}]);