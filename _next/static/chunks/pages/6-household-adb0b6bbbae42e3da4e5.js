(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{4259:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r,o=n(168),i=n(642),c=n(5893);function u(e){var t=e.children;return(0,c.jsx)("div",{className:(0,i.iv)(r||(r=(0,o.Z)(["\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n      padding: 11px 40px;\n      background: rgba(0, 0, 0, 0.5);\n      border: 1px solid #E2E2E2;\n      position: absolute;\n      top: 7%;\n      left: 50%;\n      transform: translate(-50%, 0);\n      color: #FFF;\n      letter-spacing: 0.3em;\n      font-size: 20px;\n    "]))),children:t})}},1870:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r,o=n(168),i=n(4942),c=n(3253),u=n.n(c),a=n(7294),s=n(5802),l=n(3413),f=n(642),p=n(1163),d=n(606),g=n(291),h=n(4259),m=n(5893);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}u().setAppElement("#__next");var x=[{url:"".concat(d.O4,"/p6/bg.png"),offset:.005,offsetX:0,offsetY:1,img:null,ratio:0},{url:"".concat(d.O4,"/p6/r1.png"),offset:.005,offsetX:0,offsetY:1,img:null,ratio:0,fadeLoop:{dir:"out",alpha:1}},{url:"".concat(d.O4,"/p6/b1.png"),offset:.005,offsetX:0,offsetY:1,img:null,ratio:0}],b=[{w:70,h:200,offsetX:150,offsetY:0,targetStep:4}],k=function(e,t,n){var r=t+.02*("in"===e?1:-1)*Math.random(),o=e;return r>1?(r=1,n||(o="out")):r<0&&(r=0,n||(o="in")),{dir:o,alpha:r}},C=[{id:1,person:"neutral",text:"\u6211\u89f8\u78b0\u623f\u578b\u4ecb\u7d39\uff0c\u77ac\u9593\u8eab\u8655\u53e6\u5916\u7684\u6158\u767d\u7a7a\u9593\u3002\u7246\u4e0a\u639b\u8457\u300c\u59d3\u540d\u8b8a\u66f4\u300d\u62db\u724c\uff0c\u62db\u724c\u4e0b\u65b9\u64fa\u8457\u4e00\u672c\u539a\u539a\u7684\u66f8\u7c4d\uff0c\u800c\u6ac3\u53f0\u5169\u5074\u61f8\u639b\u96f6\u788e\u6728\u724c\uff0c\u4e0a\u9762\u523b\u5beb\u8457\u773e\u591a\u4e0d\u77e5\u8ab0\u7684\u540d\u5b57\u3002"},{id:2,person:"partner",text:"\u90a3\u4e9b\u6728\u724c\u4e0a\u7684\u540d\u5b57\u662f\u8ab0\u5440\uff1f\u4f60\u6709\u6c92\u6709\u4ec0\u9ebc\u60f3\u6cd5\uff1f"},{id:3,person:"neutral",text:"\u7dad\u771f\u74b0\u9867\u4e86\u56db\u5468\uff0c\u7121\u5948\u5730\u6416\u6416\u982d\u3002"},{id:4,person:"wei",text:"\u4e26\u6c92\u6709\u3002"},{id:8,person:"partner",text:"\u9019\u4e0b\u7cdf\u7cd5\u4e86\uff0c\u96e3\u9053\u6211\u5011\u8981\u5361\u95dc\u4e86\uff1f"},{id:9,person:"wei",text:"\u5225\u5ee2\u8a71\uff0c\u8a8d\u771f\u627e\u4e00\u4e0b\u561b\u3002"},{id:10,person:"partner",text:"\u6703\u5566\uff01\u6211\u4e00\u5b9a\u8a8d\u771f\u627e\uff01"},{id:11,person:"partner",text:"\u7dad\u771f\uff0c\u59b3\u7684\u540d\u5b57\u600e\u9ebc\u53d6\u7684\u554a\uff1f"},{id:12,person:"neutral",text:"\u6211\u770b\u8457\u7246\u9762\u4e0a\u7684\u540d\u724c\uff0c\u96a8\u53e3\u554f\u9053\u3002"},{id:13,person:"wei",text:"\u6211\u8a18\u5f97\u662f\u6211\u7238\u8acb\u4eba\u7b97\u7684\uff0c\u6700\u5f8c\u5f9e\u4e2d\u6311\u4e86\u300c\u7dad\u771f\u300d\u9019\u500b\u540d\u5b57\u3002"},{id:14,person:"wei",text:"\u597d\u50cf\u5f88\u591a\u4eba\u7684\u540d\u5b57\u90fd\u662f\u9019\u6a23\u53d6\u7684\u5462\u3002"}],j=[{id:19,person:"partner",text:"\u9ec3\u5fd7\u5bb6\u2026\u2026\u9ec3\u6307\u7532\u2026\u2026"},{id:22,person:"partner",text:"\u4f46\u5982\u679c\u4e0d\u5538\u51fa\u4f86\u7684\u8a71\uff0c\u4e0d\u6703\u60f3\u5230\u90a3\u4e9b\u8ae7\u97f3\u5462\u3002"},{id:23,person:"wei",text:"\u4f60\u770b\u770b\u623f\u578b\u4ecb\u7d39\uff0c\u597d\u50cf\u53c8\u6709\u8b8a\u5316\u4e86\u3002"}],y=[{id:2,person:"partner",text:"\u5982\u679c\u56e0\u70ba\u540d\u5b57\u4e00\u76f4\u88ab\u5632\u7b11\uff0c\u771f\u7684\u662f\u6eff\u56f0\u64fe\u7684\uff0c\u4e00\u500b\u4e0d\u597d\u5c31\u8b8a\u6210\u7ae5\u5e74\u9670\u5f71\u4e4b\u4e00\u3002"},{id:3,person:"wei",text:"\u80fd\u7406\u89e3\uff0c\u570b\u5c0f\u7684\u6642\u5019\uff0c\u6211\u7238\u7238\u5de5\u4f5c\u5f88\u5fd9\u4e0d\u5e38\u56de\u5bb6\uff0c\u88ab\u540c\u5b78\u8aaa\u6210\u7238\u7238\u5916\u9047\uff0c\u88ab\u540c\u5b78\u5632\u7b11\u7684\u611f\u89ba\u78ba\u5be6\u4e0d\u597d\u53d7\u3002"},{id:4,person:"partner",text:"\u770b\u4f86\u7dad\u771f\u7684\u7ae5\u5e74\u9670\u5f71\u662f\u7238\u7238\u554a\u2026\u2026"},{id:5,person:"wei",text:"\u7562\u7adf\u4ed6\u5c31\u4e0d\u8ca0\u8cac\u4efb\uff0c\u800c\u6211\u5abd\u53c8\u795e\u7d93\u8cea\uff0c\u53ef\u4ee5\u6d3b\u904e\u5c0f\u6642\u5019\u9084\u6c92\u6b6a\u6389\u771f\u7684\u5f88\u4f69\u670d\u6211\u81ea\u5df1\u3002"},{id:6,person:"neutral",text:"\u770b\u8457\u7dad\u771f\u53c8\u60f3\u8d77\u4ed6\u7238\u7684\u4e0d\u662f\uff0c\u6211\u53ea\u597d\u99ac\u4e0a\u628a\u8a71\u984c\u62c9\u56de\u4e4b\u524d\u7684\u8a0e\u8ad6\u8f49\u79fb\u6ce8\u610f\u529b\u3002"},{id:7,person:"partner",text:"\u4e0d\u904e\u56e0\u70ba\u81ea\u7531\u6539\u540d\u4e5f\u767c\u751f\u4e00\u4e9b\u8da3\u4e8b\uff0c\u4f8b\u5982\u524d\u9663\u5b50\u70ba\u4e86\u514d\u8cbb\u512a\u60e0\uff0c\u8dd1\u53bb\u628a\u540d\u5b57\u6539\u6210\u9bad\u9b5a\u4e4b\u985e\u7684\u3002"},{id:8,person:"wei",text:"\u55ef\uff0c\u8a18\u5f97\u5c0f\u5f35\u4e5f\u53bb\u6539\u540d\uff0c\u5e36\u4e86\u597d\u591a\u4eba\u53bb\u5403\u3002"},{id:9,person:"partner",text:"\u800c\u4e14\u4ed6\u6539\u5b8c\u624d\u77e5\u9053\u6b21\u6578\u7528\u5b8c\u4e86\uff0c\u53ea\u80fd\u4e00\u8f29\u5b50\u7576\u9bad\u9b5a\u3002"}];function O(){var e,t=(0,p.useRouter)(),n=(0,a.useRef)(null),i=(0,a.useRef)(null),c=(0,a.useRef)(0),v=(0,a.useRef)(0),O=(0,a.useRef)(null),R=(0,a.useRef)(0),E=(0,a.useRef)(0),B=(0,a.useRef)({x:0,y:0}),S=(0,a.useState)(!0),T=S[0],_=S[1],P=(0,a.useState)(-1),L=P[0],X=P[1],Z=(0,a.useState)(!1),F=(Z[0],Z[1]),Y=(0,a.useRef)((function(){})),A=(0,a.useState)(0),N=A[0],D=A[1],q=(0,a.useState)(0),z=q[0],I=q[1],H=(0,a.useState)({x:0,y:0}),M=H[0],W=H[1],G=(0,a.useRef)(null),J=(0,a.useCallback)((function(e){B.current.x=e.pageX,B.current.y=e.pageY}),[]),K=(0,a.useCallback)((function(){n.current.width=window.innerWidth,n.current.height=window.innerHeight,i.current=n.current.getContext("2d"),c.current=n.current.width,v.current=n.current.height,O.current=n.current.getBoundingClientRect()}),[]),Q=(0,a.useCallback)((function(e,t){console.log("onblock in page level called",e,t),X(t),Y.current=e,0===N&&(D(1),U.current=1),2===N&&setTimeout((function(){D(3),U.current=3}),2e3)}),[N]),U=(0,a.useRef)(0),V=((0,a.useRef)(1),(0,a.useRef)(0)),$=(0,a.useCallback)((function(){i.current.clearRect(0,0,c.current,v.current),i.current.fillStyle="#1B323D",i.current.globalCompositeOperation="source-over",i.current.fillRect(0,0,c.current,v.current);for(var e=0;e<x.length;e+=1){var t=B.current.x-c.current/2,n=B.current.y-v.current/2,r=x[e].img.height*E.current,o=r*x[e].ratio;if(0===e){i.current.save(),i.current.beginPath();var u=c.current/2-o/2;i.current.moveTo(u,0),i.current.lineTo(o+u,0),i.current.lineTo(o+u,v.current),i.current.lineTo(u,v.current),i.current.lineTo(u,0),i.current.closePath(),i.current.clip()}if(x[e].fade){var a=x[e].fade,s=a.dir,l=a.alpha,f=k(s,l,!0);console.log("fade",f),i.current.globalAlpha=f.alpha,x[e].fade=w(w({},x[e].fade),f)}if(x[e].passedFrameToShow)if(V.current+=1,x[e].passedFrameToShow.delay<V.current){var p=x[e].passedFrameToShow,d=p.dir,g=p.alpha,h=k(d,g,!0);i.current.globalAlpha=h.alpha,x[e].passedFrameToShow=w(w({},x[e].passedFrameToShow),h)}else i.current.globalAlpha=0;if(x[e].fadeLoop){var m=x[e].fadeLoop,b=m.dir,C=m.alpha,j=k(b,C);i.current.globalAlpha=j.alpha,x[e].fadeLoop=w(w({},x[e].fadeLoop),j)}i.current.drawImage(x[e].img,c.current/2-o/2+x[e].offsetX*E.current+t*x[e].offset,v.current/2-r/2+x[e].offsetY*E.current+n*x[e].offset,o,r),i.current.globalAlpha=1}i.current.restore(),requestAnimationFrame($)}),[]),ee=(0,a.useCallback)((function(e){return function(t){R.current+=1,x[e].ratio=x[e].img.width/x[e].img.height,console.log("img",t,t.currentTarget.width),0===e&&(E.current=v.current/x[e].img.height),R.current==x.length&&(_(!1),$())}}),[$]),te=(0,a.useCallback)((function(){console.log("onRequestClose"),F(!1),3===N&&(D(4),Y.current())}),[N]);(0,a.useRef)(0);console.log("currentStep",N);var ne=(0,a.useCallback)((function(e){var t;I(!1),console.log(e.pageX,e.pageY,O);var n=e.pageX-c.current/2,r=e.pageY-v.current/2;b.forEach((function(e,o){if(!t){var i=e.w,c=e.h,u=e.offsetX,a=e.offsetY,s=e.targetStep;console.log(N,s);var l=n-u,f=r-a;l<i/2&&l>-i/2&&f<c/2&&f>-c/2&&(console.log("boom"),D(N+1),U.current=2,t=!0)}})),t||G.current&&(W({x:e.pageX-G.current.getBoundingClientRect().width/2,y:e.pageY}),setTimeout((function(){return I(!0)})))}),[N]);(0,a.useEffect)((function(){for(var e=0;e<x.length;e+=1){var t=new Image;t.src=x[e].url,t.onload=ee(e),x[e].img=t}}),[ee]),(0,a.useEffect)((function(){var e=n.current;return e.addEventListener("click",ne),function(){e.removeEventListener("click",ne)}}),[ne]),(0,a.useEffect)((function(){return K(),window.addEventListener("mousemove",J),window.addEventListener("resize",K),function(){window.removeEventListener("mousemove",J),window.removeEventListener("resize",K)}}),[K,J]);var re=(0,a.useState)(!1),oe=re[0],ie=re[1];(0,a.useCallback)((function(){0===N&&setTimeout((function(){D(1)}),3e3),4===N&&(ie(!0),setTimeout((function(){t.push("/7-rainbow")}),3e3))}),[N]);return(0,m.jsxs)("div",{className:(0,f.iv)(r||(r=(0,o.Z)(["\n      position: relative;\n      width: 100%;\n      height: 100vh;\n      display: flex;\n      transition: all 3000ms ease-in-out;\n      opacity: ",";\n      overflow: hidden;\n    "])),oe?0:1),children:[T&&(0,m.jsx)("div",{style:{position:"absolute",top:"40%",textAlign:"center",width:"100%",animationName:"blink",animationDuration:"3s",animationIterationCount:"infinite"},children:"loading"}),(0,m.jsxs)("div",{style:{animation:T?"":"3s 1 fadein"},children:[(0,m.jsx)("canvas",{ref:n,width:"100%",height:"100%"}),!T&&0===N&&(0,m.jsx)(s.Z,{paragraphs:C,onClick:function(){D(3)},onBlock:Q,onBlockBtnClick:function(){console.log("onBlockBtnClick"),0===N&&D(1)},onContiClick:function(){D(N+1)}}),!T&&2===N&&(0,m.jsx)(s.Z,{paragraphs:j,onClick:function(){D(3)},onBlock:Q,onBlockBtnClick:function(){console.log("onBlockBtnClick"),0===N&&D(1)},onContiClick:function(){D(N+1)}}),!T&&4===N&&(0,m.jsx)(s.Z,{paragraphs:y,onClick:function(){D(3)},onBlock:Q,onBlockBtnClick:function(){console.log("onBlockBtnClick"),0===N&&D(1)},onContiClick:function(){ie(!0),setTimeout((function(){t.push("/7-rainbow")}),3e3)}})]}),N>0&&(0,m.jsx)(g.Z,{ref:G,triggered:z,popupLoc:M}),(0,m.jsx)(u(),{isOpen:10===N,onRequestClose:te,style:{content:{width:"50%",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",display:"flex",justifyContent:"center"}},children:2===N&&(null===(e=C[L])||void 0===e?void 0:e.block)&&(0,m.jsx)(m.Fragment,{children:C[L].block.img&&(0,m.jsx)(d.ZP,{src:C[L].block.img,alt:"\u66f8\u6cd5"})})}),3===N&&(0,m.jsx)(l.Z,{onClose:function(){D(N+1),Y.current()}}),1===N&&(0,m.jsx)(h.Z,{children:"\u8acb\u7ffb\u6728\u724c"})]})}},3024:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/6-household",function(){return n(1870)}])}},function(e){e.O(0,[774,887,152,585,888,179],(function(){return t=3024,e(e.s=t);var t}));var t=e.O();_N_E=t}]);