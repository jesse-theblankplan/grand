(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{4259:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r,o=n(168),i=n(642),c=n(5893);function a(e){var t=e.children;return(0,c.jsx)("div",{className:(0,i.iv)(r||(r=(0,o.Z)(["\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n      padding: 11px 40px;\n      background: rgba(0, 0, 0, 0.5);\n      border: 1px solid #E2E2E2;\n      position: absolute;\n      top: 7%;\n      left: 50%;\n      transform: translate(-50%, 0);\n      color: #FFF;\n      letter-spacing: 0.3em;\n      font-size: 20px;\n    "]))),children:t})}},419:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r,o,i=n(168),c=n(3253),a=n.n(c),s=n(642),u=(n(606),n(5893));function l(e){var t=e.isOpen,n=e.onRequestClose,c=e.children;return(0,u.jsxs)(a(),{isOpen:t,onRequestClose:n,style:{content:{width:"50%",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",display:"flex",justifyContent:"center",maxHeight:"70%",maxWidth:"70%",minHeight:"70%",margin:0,position:"relative",padding:0,border:"4px solid #2a2a2a",backgroundColor:"rgba(41,35,28,1)"}},children:[(0,u.jsx)("div",{className:(0,s.iv)(r||(r=(0,i.Z)(["\n        color: white;\n        position: relative;\n        margin-top: 40px;\n      "]))),children:c}),(0,u.jsx)("button",{className:(0,s.iv)(o||(o=(0,i.Z)(["\n        position: absolute;\n        cursor: pointer;\n        text-decoration: underline;\n        top: 12px;\n        right: 12px;\n        color: #fff;\n        background: none;\n        border: none;\n        font-family: 'Cinzel';\n      "]))),onClick:n,children:"CLOSE"})]})}a().setAppElement("#__next")},1915:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r,o=n(168),i=n(4942),c=n(419),a=n(7294),s=n(5802),u=n(3413),l=n(642),p=n(1163),f=n(606),d=n(291),g=n(4259),h=n(5893);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=[{url:"".concat(f.O4,"/p5/bg.jpg"),offset:.005,offsetX:0,offsetY:1,img:null,ratio:0},{url:"".concat(f.O4,"/p5/r2.png"),offset:.018,offsetX:40,offsetY:70,img:null,ratio:0},{url:"".concat(f.O4,"/p5/r1.png"),offset:.1,offsetX:10,offsetY:-250,img:null,ratio:0}],v=[{w:200,h:200,offsetX:80,offsetY:-90,targetStep:4}],b=function(e,t,n){var r=t+.02*("in"===e?1:-1)*Math.random(),o=e;return r>1?(r=1,n||(o="out")):r<0&&(r=0,n||(o="in")),{dir:o,alpha:r}},k=[{id:1,person:"neutral",text:"\u5ffd\u7136\u5468\u906d\u7684\u666f\u8c61\u8b8a\u63db\uff0c\u6211\u5011\u4f86\u5230\u4e86\u53e6\u5916\u4e00\u500b\u7a7a\u9593\u3002\u4e00\u6383\u4e0d\u901a\u98a8\u7684\u60b6\u71b1\u611f\u3002\u9435\u6b04\u6746\u963b\u6514\u5728\u7a97\u524d\u3001\u7246\u4e0a\u8cbc\u6eff\u8457\u5404\u5f0f\u7167\u7247\u8207\u6587\u4ef6\uff0c\u9670\u6697\u7684\u7a7a\u9593\u8b93\u4eba\u76f4\u89ba\u806f\u60f3\u5230\u76e3\u7344\u3002"},{id:2,person:"partner",text:"\u9019\u2026\u2026\u662f\u600e\u9ebc\u4e00\u56de\u4e8b\u554a\uff1f"},{id:3,person:"wei",text:"\u4f60\u525b\u525b\u505a\u4e86\u4ec0\u9ebc\uff1f"},{id:4,person:"partner",text:"\u5c31\u78b0\u4e00\u4e0b\u623f\u578b\u4ecb\u7d39\u2026\u2026"},{id:5,person:"wei",text:"\u6211\u770b\u770b\u2026\u2026"},{id:6,person:"neutral",text:"\u6211\u5c07\u624b\u4e2d\u7684\u623f\u578b\u4ecb\u7d39\u905e\u7d66\u7dad\u771f\u3002"},{id:7,person:"wei",text:"\u6240\u4ee5\u4f60\u8aaa\u9019\u90e8\u5206\u5728\u4e4b\u524d\u8ddf\u5176\u4ed6\u5730\u65b9\u4e00\u6a23\u90fd\u662f\u88ab\u5857\u9ed1\u7684\uff1f"},{id:8,person:"partner",text:"\u5c0d\u554a\u3002"},{id:9,person:"wei",text:"\u2026\u2026\u770b\u4f86\u623f\u578b\u4ecb\u7d39\u6709\u9ede\u53e4\u602a\u3002"},{id:10,person:"neutral",text:"\u7dad\u771f\u7684\u63a8\u60f3\u8b93\u6211\u7684\u601d\u7dd2\u6f38\u6f38\u56de\u5230\u73fe\u5be6\uff0c\u6211\u597d\u5947\u5730\u6e4a\u4e0a\u524d\u8207\u5979\u4e00\u540c\u67e5\u770b\u3002"},{id:12,person:"partner",text:"\u611f\u89ba\u9019\u4e9b\u5167\u5bb9\u597d\u50cf\u8ddf\u6211\u5011\u525b\u525b\u7d93\u6b77\u7684\u4e8b\u6709\u95dc\u3002"},{id:13,person:"wei",text:"\u662f\u554a\uff0c\u770b\u4f86\u662f\u6709\u4eba\u523b\u610f\u5b89\u6392\u7684\u3002"},{id:14,person:"partner",text:"\u8ab0\u90a3\u9ebc\u7121\u804a\u554a\uff0c\u96e3\u9053\u662f\u59b3\u7238\uff1f\u4ed6\u6709\u5fc5\u8981\u9019\u9ebc\u505a\u55ce\uff1f"},{id:15,person:"wei",text:"\u4e0d\u77e5\u9053\u56c9\uff0c\u770b\u4ed6\u60f3\u600e\u6a23\uff0c\u6211\u898b\u62db\u62c6\u62db\u3002"},{id:16,person:"neutral",text:"\u6211\u89c0\u5bdf\u5468\u906d\uff0c\u770b\u8d77\u4f86\u50cf\u76e3\u7344\u7684\u5957\u623f\u56db\u9762\u90fd\u662f\u9ad8\u7246\uff0c\u6709\u8457\u8a6d\u7570\u4e0d\u8a73\u7684\u6c1b\u570d\u3002"},{id:17,person:"partner",text:"\u4f60\u5011\u98ef\u5e97\u88e1\u70ba\u4ec0\u9ebc\u6703\u6709\u76e3\u7344\u98a8\u683c\u7684\u623f\u9593\uff0c\u9019\u8ab0\u6703\u60f3\u4f4f\u554a\u3002"},{id:18,person:"neutral",text:"\u7dad\u771f\u6c92\u6709\u7406\u6703\u6211\uff0c\u53ea\u662f\u4ed4\u7d30\u7684\u7aef\u8a73\u6211\u8eab\u5f8c\u7684\u4f4d\u7f6e\uff0c\u4f3c\u4e4e\u767c\u73fe\u4e86\u4ec0\u9ebc\u4e0d\u5c0b\u5e38\u7684\u5730\u65b9\u3002"},{id:19,person:"wei",text:"\u9019\u88e1\u600e\u9ebc\u6703\u51fa\u73fe\u9019\u500b\u2026\u2026"}],C=[{id:20,person:"partner",text:"\u4ec0\u9ebc\uff1f"},{id:21,person:"wei",text:"\u90a3\u4ef6\u66f8\u6cd5\u662f\u6211\u7238\u5beb\u7684\uff01"},{id:22,person:"partner",text:"\u59b3\u600e\u9ebc\u90a3\u9ebc\u80af\u5b9a\uff1f\u66f8\u6cd5\u7b46\u8de1\u90fd\u9577\u5dee\u4e0d\u591a\uff0c\u641e\u4e0d\u597d\u662f\u5176\u4ed6\u4eba\u7684\u4f5c\u54c1\u2014\u2014"},{id:23,person:"wei",text:"\u5c0f\u6642\u5019\u5bb6\u88e1\u64fa\u6eff\u4e86\u8001\u7238\u7684\u66f8\u6cd5\u5b57\u756b\uff0c\u6211\u5f9e\u5c0f\u770b\u5230\u5927\uff0c\u7d55\u5c0d\u4e0d\u6703\u8a8d\u932f\u3002"},{id:24,person:"partner",text:"\u4e0a\u9762\u5beb\u8457\u300c\u7121\u7f6a\u300d\u6b38\uff0c\u9084\u88ab\u88f1\u6846\u3002"},{id:25,person:"wei",text:"\u770b\u8d77\u4f86\u5c31\u50cf\u662f\u8981\u66ff\u8ab0\u7533\u8a34\u51a4\u60c5\u3002"},{id:26,person:"partner",text:"\u76e3\u7344\u98a8\u7684\u4e3b\u984c\u5957\u623f\u3001\u5beb\u8457\u300c\u7121\u7f6a\u300d\u7684\u66f8\u6cd5\u2026\u2026\u6eff\u8af7\u523a\u7684\u3002"},{id:27,person:"wei",text:"\u4f60\u8d95\u7dca\u770b\u770b\u623f\u578b\u4ecb\u7d39\u6709\u6c92\u6709\u4ec0\u9ebc\u8b8a\u5316\uff1f"},{id:28,person:"partner",text:"\u2014\u2014\u6709\u6b38\uff01\u9019\u908a\u7684\u5857\u9ed1\u8655\u4e0d\u898b\u4e86\uff0c\u592a\u795e\u5947\u4e86\u5427\uff01"}],j=[{id:1,person:"wei",text:"\u539f\u4f86\u662f\u4ed6\u2026\u2026"},{id:2,person:"partner",text:"\u8ab0\u554a\uff1f"},{id:3,person:"wei",text:"\u4f60\u4e0d\u77e5\u9053\u55ce\uff1f\u6b77\u7d9321\u5e74\u8a34\u8a1f\uff0c\u524d\u5e7e\u5e74\u624d\u5e73\u53cd\u7684\u5f90\u81ea\u5f37\u6848\u3002"},{id:4,person:"partner",text:"\u5594\u5594\u597d\u50cf\u6709\u807d\u8aaa\uff0c\u53ea\u662f\u6c92\u6709\u8a18\u5f97\u4ed6\u7684\u540d\u5b57\u3002"},{id:5,person:"wei",text:"\u6240\u4ee5\u6211\u7238\u7559\u4e0b\u4e86\u9019\u5e45\u66f8\u6cd5\u4f5c\u54c1\uff0c\u662f\u56e0\u70ba\u4ed6\u8ddf\u9019\u5b97\u6848\u4ef6\u6709\u95dc\uff1f\u4e5f\u8a31\u4e5f\u662f\u56e0\u6b64\u624d\u6709\u4e86\u9019\u9593\u623f\u9593\u2026\u2026"},{id:6,person:"neutral",text:"\u7dad\u771f\u8a71\u8aaa\u5230\u4e00\u534a\uff0c\u4e0d\u77e5\u9053\u5728\u60f3\u4e9b\u4ec0\u9ebc\u3002\u6211\u539f\u672c\u4e0d\u60f3\u6253\u64fe\u5979\u6c88\u601d\uff0c\u4f46\u5979\u5be6\u5728\u592a\u4e45\u6c92\u958b\u53e3\uff0c\u6211\u9084\u662f\u628a\u60f3\u8aaa\u7684\u8a71\u984c\u62cb\u4e86\u51fa\u4f86\u3002"},{id:7,person:"partner",text:"\u4e0d\u904e\u7576\u4e8b\u4eba\u4e5f\u771f\u7684\u6eff\u8870\u7684\uff0c\u56e0\u70ba\u5176\u4ed6\u88ab\u544a\u7684\u8aaa\u6cd5\u5c31\u88ab\u7576\u6210\u5171\u72af\u3002"},{id:8,person:"neutral",text:"\u7dad\u771f\u770b\u4e86\u770b\u56db\u5468\uff0c\u53c8\u770b\u4e86\u770b\u6211\u624b\u4e0a\u7684\u623f\u578b\u4ecb\u7d39\uff0c\u4f3c\u4e4e\u5728\u601d\u8003\u4e0b\u4e00\u6b65\u8a72\u600e\u9ebc\u9032\u884c\u3002"},{id:9,person:"wei",text:"\u623f\u578b\u4ecb\u7d39\u9664\u4e86\u51fa\u73fe\u4e86\u6558\u8ff0\u4e4b\u5916\uff0c\u9084\u6709\u4ec0\u9ebc\u6539\u8b8a\uff1f"},{id:10,person:"partner",text:"\u6211\u770b\u770b\u2026\u2026"}];function y(){var e=(0,p.useRouter)(),t=(0,a.useRef)(null),n=(0,a.useRef)(null),i=(0,a.useRef)(0),x=(0,a.useRef)(0),y=(0,a.useRef)(null),O=(0,a.useRef)(0),R=(0,a.useRef)(0),E=(0,a.useRef)({x:0,y:0}),B=(0,a.useState)(!0),S=B[0],T=B[1],Z=(0,a.useState)(-1),_=(Z[0],Z[1]),P=(0,a.useState)(!1),L=(P[0],P[1]),X=(0,a.useRef)((function(){})),N=(0,a.useState)(0),Y=N[0],F=N[1],A=(0,a.useState)(0),D=A[0],q=A[1],z=(0,a.useState)({x:0,y:0}),H=z[0],I=z[1],W=(0,a.useRef)(null),M=(0,a.useCallback)((function(e){E.current.x=e.pageX,E.current.y=e.pageY}),[]),G=(0,a.useCallback)((function(){t.current.width=window.innerWidth,t.current.height=window.innerHeight,n.current=t.current.getContext("2d"),i.current=t.current.width,x.current=t.current.height,y.current=t.current.getBoundingClientRect()}),[]),J=(0,a.useCallback)((function(e,t){console.log("onblock in page level called",e,t),_(t),X.current=e,0===Y&&(F(1),K.current=1),3===Y&&setTimeout((function(){F(4),K.current=4}),2e3)}),[Y]),K=(0,a.useRef)(0),Q=((0,a.useRef)(1),(0,a.useRef)(0)),U=(0,a.useCallback)((function(){n.current.clearRect(0,0,i.current,x.current),n.current.fillStyle="#1B323D",n.current.globalCompositeOperation="source-over",n.current.fillRect(0,0,i.current,x.current);for(var e=0;e<w.length;e+=1){var t=E.current.x-i.current/2,r=E.current.y-x.current/2,o=w[e].img.height*R.current,c=o*w[e].ratio;if(0===e){n.current.save(),n.current.beginPath();var a=i.current/2-c/2;n.current.moveTo(a,0),n.current.lineTo(c+a,0),n.current.lineTo(c+a,x.current),n.current.lineTo(a,x.current),n.current.lineTo(a,0),n.current.closePath(),n.current.clip()}if(w[e].fade){var s=w[e].fade,u=s.dir,l=s.alpha,p=b(u,l,!0);console.log("fade",p),n.current.globalAlpha=p.alpha,w[e].fade=m(m({},w[e].fade),p)}if(w[e].passedFrameToShow)if(Q.current+=1,w[e].passedFrameToShow.delay<Q.current){var f=w[e].passedFrameToShow,d=f.dir,g=f.alpha,h=b(d,g,!0);n.current.globalAlpha=h.alpha,w[e].passedFrameToShow=m(m({},w[e].passedFrameToShow),h)}else n.current.globalAlpha=0;if(w[e].fadeLoop){var v=w[e].fadeLoop,k=v.dir,C=v.alpha,j=b(k,C);n.current.globalAlpha=j.alpha,w[e].fadeLoop=m(m({},w[e].fadeLoop),j)}n.current.drawImage(w[e].img,i.current/2-c/2+w[e].offsetX*R.current+t*w[e].offset,x.current/2-o/2+w[e].offsetY*R.current+r*w[e].offset,c,o),n.current.globalAlpha=1}n.current.restore(),requestAnimationFrame(U)}),[]),V=(0,a.useCallback)((function(e){return function(t){O.current+=1,w[e].ratio=w[e].img.width/w[e].img.height,console.log("img",t,t.currentTarget.width),0===e&&(R.current=x.current/w[e].img.height),O.current==w.length&&(T(!1),U())}}),[U]),$=(0,a.useCallback)((function(){console.log("onRequestClose"),L(!1),2===Y&&(F(3),X.current())}),[Y]),ee=((0,a.useRef)(0),(0,a.useCallback)((function(e){var t;q(!1),console.log(e.pageX,e.pageY,y);var n=e.pageX-i.current/2,r=e.pageY-x.current/2;v.forEach((function(e,o){if(!t){var i=e.w,c=e.h,a=e.offsetX,s=e.offsetY,u=e.targetStep;console.log(Y,u);var l=n-a,p=r-s;l<i/2&&l>-i/2&&p<c/2&&p>-c/2&&(console.log("boom"),F(Y+1),t=!0)}})),t?F(2):W.current&&(I({x:e.pageX-W.current.getBoundingClientRect().width/2,y:e.pageY}),setTimeout((function(){return q(!0)})))}),[Y]));(0,a.useEffect)((function(){for(var e=0;e<w.length;e+=1){var t=new Image;t.src=w[e].url,t.onload=V(e),w[e].img=t}}),[V]),(0,a.useEffect)((function(){var e=t.current;return e.addEventListener("click",ee),function(){e.removeEventListener("click",ee)}}),[ee]),(0,a.useEffect)((function(){return G(),window.addEventListener("mousemove",M),window.addEventListener("resize",G),function(){window.removeEventListener("mousemove",M),window.removeEventListener("resize",G)}}),[G,M]);var te=(0,a.useState)(!1),ne=te[0],re=te[1];(0,a.useCallback)((function(){0===Y&&setTimeout((function(){F(1)}),2e3),5===Y&&(re(!0),setTimeout((function(){e.push("/6-household")}),3e3))}),[Y]);return(0,h.jsxs)("div",{className:(0,l.iv)(r||(r=(0,o.Z)(["\n      position: relative;\n      width: 100%;\n      height: 100vh;\n      display: flex;\n      transition: all 3000ms ease-in-out;\n      opacity: ",";\n      overflow: hidden;\n    "])),ne?0:1),children:[S&&(0,h.jsx)("div",{style:{position:"absolute",top:"40%",textAlign:"center",width:"100%",animationName:"blink",animationDuration:"3s",animationIterationCount:"infinite"},children:"loading"}),(0,h.jsxs)("div",{style:{animation:S?"":"3s 1 fadein"},children:[(0,h.jsx)("canvas",{ref:t,width:"100%",height:"100%"}),!S&&0===Y&&(0,h.jsx)(s.Z,{paragraphs:k,onClick:function(){F(3)},onBlock:J,onBlockBtnClick:function(){console.log("onBlockBtnClick"),0===Y&&F(1)},onContiClick:function(){F(Y+1)}}),!S&&3===Y&&(0,h.jsx)(s.Z,{paragraphs:C,onClick:function(){F(3)},onBlock:J,onBlockBtnClick:function(){console.log("onBlockBtnClick"),0===Y&&F(1)},onContiClick:function(){F(Y+1)}}),!S&&5===Y&&(0,h.jsx)(s.Z,{paragraphs:j,onClick:function(){F(3)},onBlock:J,onBlockBtnClick:function(){console.log("onBlockBtnClick"),0===Y&&F(1)},onContiClick:function(){re(!0),setTimeout((function(){e.push("/6-household")}),3e3)}})]}),Y>0&&(0,h.jsx)(d.Z,{ref:W,triggered:D,popupLoc:H}),(0,h.jsx)(c.Z,{isOpen:2===Y,onRequestClose:$,children:(0,h.jsx)(f.ZP,{src:"".concat(f.O4,"/p5/b1.png"),alt:"\u66f8\u6cd5",width:235950/721,height:"550"})}),4===Y&&(0,h.jsx)(u.Z,{onClose:function(){4===Y&&(F(5),X.current())}}),1===Y&&(0,h.jsx)(g.Z,{children:"\u8acb\u9ede\u64ca\u66f8\u6cd5\u4f5c\u54c1"})]})}},5350:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/5-jail",function(){return n(1915)}])}},function(e){e.O(0,[774,887,152,585,888,179],(function(){return t=5350,e(e.s=t);var t}));var t=e.O();_N_E=t}]);