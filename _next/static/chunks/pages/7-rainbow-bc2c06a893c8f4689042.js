(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{4259:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r,o=n(168),i=n(642),a=n(5893);function c(e){var t=e.children;return(0,a.jsx)("div",{className:(0,i.iv)(r||(r=(0,o.Z)(["\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n      padding: 11px 40px;\n      background: rgba(0, 0, 0, 0.5);\n      border: 1px solid #E2E2E2;\n      position: absolute;\n      top: 7%;\n      left: 50%;\n      transform: translate(-50%, 0);\n      color: #FFF;\n      letter-spacing: 0.3em;\n      font-size: 20px;\n    "]))),children:t})}},5009:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r,o=n(168),i=n(4942),a=n(3253),c=n.n(a),u=n(7294),s=n(9722),l=n(615),f=n(642),p=n(1163),d=(n(4170),n(606)),g=n(291),h=n(4259),x=n(5893);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c().setAppElement("#__next");var A=[{url:"/p1/bg.jpg",offset:.005,offsetX:0,offsetY:1,img:null,ratio:0},{url:"/p1/r1.png",offset:.005,offsetX:0,offsetY:1,img:null,ratio:0,fadeLoop:{dir:"out",alpha:1}},{url:"/p7/r2.png",offset:.005,offsetX:0,offsetY:1,img:null,ratio:0}],v=[{w:50,h:150,offsetX:-5,offsetY:-10,targetStep:4}],b=function(e,t,n){var r=t+.02*("in"===e?1:-1)*Math.random(),o=e;return r>1?(r=1,n||(o="out")):r<0&&(r=0,n||(o="in")),{dir:o,alpha:r}},k=[{id:1,person:"neutral",text:"\u6211\u5011\u4f86\u5230\u4f3c\u4e4e\u50cf\u6559\u5802\u7684\u7a7a\u9593\uff0c\u90a3\u5be7\u975c\u7f8e\u597d\u7684\u756b\u9762\u8b93\u6211\u5011\u4e00\u6642\u4e4b\u9593\u90fd\u8aaa\u4e0d\u51fa\u8a71\u4f86\uff0c\u6c89\u6d78\u5728\u9019\u80a1\u6eab\u6696\u7684\u6c1b\u570d\u7576\u4e2d\u3002"},{id:2,person:"partner",text:"\u9019\u88e1\u2026\u2026\u611f\u89ba\u597d\u6eab\u99a8\u3002"},{id:3,person:"wei",text:"\u55ef\u3002"},{id:4,person:"neutral",text:"\u5c31\u5728\u6211\u56db\u8655\u6253\u91cf\u6642\uff0c\u767c\u73fe\u7246\u4e0a\u90a3\u4e9b\u770b\u8d77\u4f86\u76f8\u7576\u89aa\u66b1\u7684\u60c5\u4fb6\u5408\u7167\u4e2d\uff0c\u4e26\u4e0d\u5b8c\u5168\u90fd\u662f\u50b3\u7d71\u7684\u4e00\u7537\u4e00\u5973\u3002"},{id:8,person:"neutral",text:"\u770b\u5230\u4e0d\u5c11\u540c\u6027\u4f34\u4fb6\u7684\u89aa\u66b1\u5408\u7167\uff0c\u6211\u99ac\u4e0a\u660e\u767d\u4e86\u9019\u500b\u7a7a\u9593\u4ee3\u8868\u7684\u610f\u7fa9\uff0c\u8208\u596e\u5730\u62cd\u4e86\u62cd\u7dad\u771f\u7684\u80a9\u8180\u3002"},{id:10,person:"partner",text:"\u6b38\uff0c\u7dad\u771f\uff0c\u59b3\u5feb\u770b\u9019\u9019\u4e9b\u7167\u7247\u3002"},{id:11,person:"wei",text:"\u9019\u500b\u623f\u9593\u61c9\u8a72\u662f\u5a5a\u59fb\u5e73\u6b0a\u7684\u4e3b\u984c\u4e86\u3002"},{id:13,person:"partner",text:"\u9019\u500b\u6211\u6709\u5370\u8c61\uff0c\u524d\u9663\u5b50\u7684\u4e8b\u800c\u5df2\uff0c\u90a3\u6642\u5019\u8a0e\u8ad6\u5ea6\u883b\u9ad8\u7684\u3002"},{id:14,person:"wei",text:"\u662f\u554a\uff0c\u7576\u6642\u5f15\u8d77\u9817\u5927\u7684\u8f3f\u8ad6\uff0c\u6eff\u4f69\u670d\u5927\u6cd5\u5b98\u9858\u610f\u5982\u6b64\u89e3\u91cb\u3002"},{id:15,person:"partner",text:"\u662f\u554a\uff0c\u771f\u4e0d\u77e5\u9053\u6709\u591a\u5c11\u4eba\u7b49\u9019\u4e00\u5929\u7b49\u4e86\u591a\u4e45\u3002"},{id:16,person:"neutral",text:"\u6211\u5011\u4ea4\u6d41\u8457\u5f7c\u6b64\u5c0d\u5a5a\u59fb\u5e73\u6b0a\u7684\u770b\u6cd5\uff0e\u4e00\u908a\u89c0\u5bdf\u6709\u6c92\u6709\u4ec0\u9ebc\u7279\u5225\u7684\u7269\u54c1\u3002"}],C=[{id:19,person:"neutral",text:"\u6211\u5fcd\u4e0d\u4f4f\u4f38\u624b\u89f8\u6478\u96a8\u98a8\u98c4\u9038\u7684\u5f69\u8679\u65d7\uff0c\u524e\u90a3\u9593\uff0c\u55a7\u9b27\u7684\u8072\u97f3\u95d6\u9032\u4e86\u6211\u7684\u8033\u88e1\uff0c\u4e00\u7fa4\u9ad8\u8209\u8457\u5f69\u8679\u65d7\u7684\u4eba\u5011\u7d93\u904e\u3002"},{id:22,person:"neutral",text:"\u7dad\u771f\u770b\u8457\u904a\u884c\u968a\u4f0d\u5ffd\u7136\u77aa\u5927\u4e86\u96d9\u773c\uff0c\u7acb\u523b\u671d\u8457\u4eba\u7fa4\u7684\u65b9\u5411\u8dd1\u53bb\uff0c\u6211\u9023\u5fd9\u8ddf\u4e86\u4e0a\u53bb\u3002"},{id:23,person:"partner",text:"\u59b3\u5e79\u561b\u554a\uff1f\u600e\u9ebc\u5ffd\u7136\u8dd1\u8d77\u4f86\u4e86\uff0c\u90a3\u908a\u6709\u4ec0\u9ebc\u55ce\uff1f"},{id:24,person:"wei",text:"\u6211\u7238\u5728\u4eba\u7fa4\u88e1\u9762\uff01"},{id:25,person:"partner",text:"\u4f60\u7238\u5728\u88e1\u9762\uff1f\u4ed6\u4e0d\u662f\u5df2\u7d93\u2026\u2026"},{id:26,person:"wei",text:"\u55ef\uff0c\u4e0d\u904e\u4f60\u4e5f\u767c\u73fe\u4e86\u5427\uff1f\u90a3\u4e9b\u4eba\u770b\u8d77\u4f86\u96e2\u6211\u5011\u4e0d\u9060\uff0c\u4f46\u6211\u5011\u537b\u600e\u9ebc\u6a23\u4e5f\u7121\u6cd5\u62c9\u8fd1\u8ddd\u96e2\u3002"},{id:27,person:"partner",text:"\u90a3\u4e9b\u4eba\u8a72\u4e0d\u6703\u90fd\u662f\u5e7d\u9748\u5427\uff1f"},{id:28,person:"wei",text:"\u4e0d\uff0c\u4f9d\u7167\u524d\u9762\u623f\u9593\u7684\u6240\u898b\u6240\u805e\uff0c\u6bcf\u9593\u623f\u9593\u90fd\u8ddf\u5927\u6cd5\u5b98\u91cb\u61b2\u6709\u95dc\u3002\u6211\u5011\u770b\u5230\u7684\u90a3\u4e9b\u666f\u8c61\uff0c\u61c9\u8a72\u90fd\u662f\u63a8\u52d5\u91cb\u61b2\u7684\u904e\u7a0b\uff0c\u800c\u6211\u7238\u4e5f\u53c3\u8207\u5176\u4e2d\u3002"},{id:29,person:"partner",text:"\u770b\u4f86\u4f60\u7238\u5f88\u95dc\u6ce8\u9019\u4e9b\u793e\u6703\u8b70\u984c\u5462\u3002"},{id:30,person:"wei",text:"\u6240\u4ee5\u4ed6\u4e26\u4e0d\u662f\u56e0\u70ba\u5de5\u4f5c\u800c\u7121\u6cd5\u56de\u5bb6\u2026\u2026\u4ed6\u660e\u660e\u6709\u6642\u9593\u537b\u4e0d\u966a\u6211\u5011\uff0c\u8dd1\u53bb\u6297\u8b70\u2026\u2026"},{id:31,person:"partner",text:"\u807d\u898b\u7dad\u771f\u5c0d\u7236\u89aa\u7684\u4e0d\u8ad2\u89e3\uff0c\u6211\u5c37\u5c2c\u5730\u6414\u4e86\u6414\u982d\uff0c\u4e0d\u77e5\u9053\u8a72\u5982\u4f55\u628a\u8a71\u984c\u63a5\u4e0b\u53bb\u3002"},{id:32,person:"partner",text:"\u54ce\u5440\uff0c\u771f\u662f\u7684\uff01\u6211\u5011\u5148\u96e2\u958b\u9019\u88e1\uff0c\u4e4b\u5f8c\u518d\u60f3\u5427\u3002"}],j=[{id:2,person:"partner",text:"\u5982\u679c\u56e0\u70ba\u540d\u5b57\u4e00\u76f4\u88ab\u5632\u7b11\uff0c\u771f\u7684\u662f\u6eff\u56f0\u64fe\u7684\uff0c\u4e00\u500b\u4e0d\u597d\u5c31\u8b8a\u6210\u7ae5\u5e74\u9670\u5f71\u4e4b\u4e00\u3002"},{id:3,person:"wei",text:"\u80fd\u7406\u89e3\uff0c\u570b\u5c0f\u7684\u6642\u5019\uff0c\u6211\u7238\u7238\u5de5\u4f5c\u5f88\u5fd9\u4e0d\u5e38\u56de\u5bb6\uff0c\u88ab\u540c\u5b78\u8aaa\u6210\u7238\u7238\u5916\u9047\uff0c\u88ab\u540c\u5b78\u5632\u7b11\u7684\u611f\u89ba\u78ba\u5be6\u4e0d\u597d\u53d7\u3002"},{id:4,person:"partner",text:"\u770b\u4f86\u4f86\u7dad\u771f\u7684\u7ae5\u5e74\u9670\u5f71\u662f\u7238\u7238\u554a\u2026\u2026"},{id:5,person:"wei",text:"\u7562\u7adf\u4ed6\u5c31\u4e0d\u8ca0\u8cac\u4efb\uff0c\u800c\u6211\u5abd\u53c8\u795e\u7d93\u8cea\uff0c\u53ef\u4ee5\u6d3b\u904e\u5c0f\u6642\u5019\u9084\u6c92\u6b6a\u6389\u771f\u7684\u5f88\u4f69\u670d\u6211\u81ea\u5df1\u3002"},{id:6,person:"neutral",text:"\u770b\u8457\u7dad\u771f\u53c8\u60f3\u8d77\u4ed6\u7238\u7684\u4e0d\u662f\uff0c\u6211\u53ea\u597d\u99ac\u4e0a\u628a\u8a71\u984c\u62c9\u56de\u4e4b\u524d\u7684\u8a0e\u8ad6\u8f49\u79fb\u6ce8\u610f\u529b\u3002"},{id:7,person:"partner",text:"\u4e0d\u904e\u56e0\u70ba\u81ea\u7531\u6539\u540d\u4e5f\u767c\u751f\u4e00\u4e9b\u8da3\u4e8b\uff0c\u4f8b\u5982\u524d\u9663\u5b50\u70ba\u4e86\u514d\u8cbb\u512a\u60e0\uff0c\u8dd1\u53bb\u628a\u540d\u5b57\u6539\u6210\u9bad\u9b5a\u4e4b\u985e\u7684\u3002"},{id:8,person:"wei",text:"\u55ef\uff0c\u8a18\u5f97\u5c0f\u5f35\u4e5f\u53bb\u6539\u540d\uff0c\u5e36\u4e86\u597d\u591a\u4eba\u53bb\u5403\u3002"},{id:9,person:"partner",text:"\u800c\u4e14\u4ed6\u6539\u5b8c\u624d\u77e5\u9053\u6b21\u6578\u7528\u5b8c\u4e86\uff0c\u53ea\u80fd\u4e00\u8f29\u5b50\u7576\u9bad\u9b5a\u3002"}];function R(){var e,t=(0,p.useRouter)(),n=(0,u.useRef)(null),i=(0,u.useRef)(null),a=(0,u.useRef)(0),m=(0,u.useRef)(0),R=(0,u.useRef)(null),y=(0,u.useRef)(0),B=(0,u.useRef)(0),E=(0,u.useRef)({x:0,y:0}),O=(0,u.useState)(!0),P=O[0],T=O[1],S=(0,u.useState)(-1),Y=S[0],Z=S[1],F=(0,u.useState)(!1),L=(F[0],F[1]),X=(0,u.useRef)((function(){})),_=(0,u.useState)(0),D=_[0],N=_[1],U=(0,u.useState)(0),I=U[0],G=U[1],q=(0,u.useState)({x:0,y:0}),z=q[0],Q=q[1],V=(0,u.useRef)(null),H=(0,u.useCallback)((function(e){E.current.x=e.pageX,E.current.y=e.pageY}),[]),K=(0,u.useCallback)((function(){n.current.width=window.innerWidth,n.current.height=window.innerHeight,i.current=n.current.getContext("2d"),a.current=n.current.width,m.current=n.current.height,R.current=n.current.getBoundingClientRect()}),[]),J=(0,u.useCallback)((function(e,t){console.log("onblock in page level called",e,t),Z(t),X.current=e,0===D&&(N(1),W.current=1),2===D&&setTimeout((function(){N(3),W.current=3}),2e3)}),[D]),W=(0,u.useRef)(0),M=((0,u.useRef)(1),(0,u.useRef)(0)),$=(0,u.useCallback)((function(){i.current.clearRect(0,0,a.current,m.current),i.current.fillStyle="#1B323D",i.current.globalCompositeOperation="source-over",i.current.fillRect(0,0,a.current,m.current);for(var e=0;e<A.length;e+=1){var t=E.current.x-a.current/2,n=E.current.y-m.current/2,r=A[e].img.height*B.current,o=r*A[e].ratio;if(0===e){i.current.save(),i.current.beginPath();var c=a.current/2-o/2;i.current.moveTo(c,0),i.current.lineTo(o+c,0),i.current.lineTo(o+c,m.current),i.current.lineTo(c,m.current),i.current.lineTo(c,0),i.current.closePath(),i.current.clip()}if(A[e].fade){var u=A[e].fade,s=u.dir,l=u.alpha,f=b(s,l,!0);console.log("fade",f),i.current.globalAlpha=f.alpha,A[e].fade=w(w({},A[e].fade),f)}if(A[e].passedFrameToShow)if(M.current+=1,A[e].passedFrameToShow.delay<M.current){var p=A[e].passedFrameToShow,d=p.dir,g=p.alpha,h=b(d,g,!0);i.current.globalAlpha=h.alpha,A[e].passedFrameToShow=w(w({},A[e].passedFrameToShow),h)}else i.current.globalAlpha=0;if(A[e].fadeLoop){var x=A[e].fadeLoop,v=x.dir,k=x.alpha,C=b(v,k);i.current.globalAlpha=C.alpha,A[e].fadeLoop=w(w({},A[e].fadeLoop),C)}i.current.drawImage(A[e].img,a.current/2-o/2+A[e].offsetX*B.current+t*A[e].offset,m.current/2-r/2+A[e].offsetY*B.current+n*A[e].offset,o,r),i.current.globalAlpha=1}i.current.restore(),requestAnimationFrame($)}),[]),ee=(0,u.useCallback)((function(e){return function(t){y.current+=1,A[e].ratio=A[e].img.width/A[e].img.height,console.log("img",t,t.currentTarget.width),0===e&&(B.current=m.current/A[e].img.height),y.current==A.length&&(T(!1),$())}}),[$]),te=(0,u.useCallback)((function(){console.log("onRequestClose"),L(!1),3===D&&(N(4),X.current())}),[D]),ne=((0,u.useRef)(0),(0,u.useCallback)((function(e){var t;G(!1),console.log(e.pageX,e.pageY,R);var n=e.pageX-a.current/2,r=e.pageY-m.current/2;v.forEach((function(e,o){if(!t){var i=e.w,a=e.h,c=e.offsetX,u=e.offsetY,s=(e.targetStep,n-c),l=r-u;s<i/2&&s>-i/2&&l<a/2&&l>-a/2&&(console.log("boom"),N(D+1),t=!0)}})),t||V.current&&(Q({x:e.pageX-V.current.getBoundingClientRect().width/2,y:e.pageY}),setTimeout((function(){return G(!0)})))}),[D]));(0,u.useEffect)((function(){for(var e=0;e<A.length;e+=1){var t=new Image;t.src=A[e].url,t.onload=ee(e),A[e].img=t}}),[ee]),(0,u.useEffect)((function(){var e=n.current;return e.addEventListener("click",ne),function(){e.removeEventListener("click",ne)}}),[ne]),(0,u.useEffect)((function(){return K(),window.addEventListener("mousemove",H),window.addEventListener("resize",K),function(){window.removeEventListener("mousemove",H),window.removeEventListener("resize",K)}}),[K,H]);var re=(0,u.useState)(!1),oe=re[0],ie=re[1];(0,u.useCallback)((function(){0===D&&N(1),3===D&&(ie(!0),setTimeout((function(){t.push("/8-classroom")}),3e3))}),[D]);return(0,x.jsxs)("div",{className:(0,f.iv)(r||(r=(0,o.Z)(["\n      position: relative;\n      width: 100%;\n      height: 100vh;\n      display: flex;\n      transition: all 3000ms ease-in-out;\n      opacity: ",";\n      overflow: hidden;\n    "])),oe?0:1),children:[P&&(0,x.jsx)("div",{style:{position:"absolute",top:"40%",textAlign:"center",width:"100%",animationName:"blink",animationDuration:"3s",animationIterationCount:"infinite"},children:"loading"}),(0,x.jsxs)("div",{style:{animation:P?"":"3s 1 fadein"},children:[(0,x.jsx)("canvas",{ref:n,width:"100%",height:"100%"}),!P&&0===D&&(0,x.jsx)(s.Z,{paragraphs:k,onClick:function(){N(3)},onBlock:J,onBlockBtnClick:function(){console.log("onBlockBtnClick"),0===D&&N(1)},onContiClick:function(){N(D+1)}}),!P&&3===D&&(0,x.jsx)(s.Z,{paragraphs:C,onClick:function(){N(3)},onBlock:J,onBlockBtnClick:function(){console.log("onBlockBtnClick"),0===D&&N(1)},onContiClick:function(){ie(!0),setTimeout((function(){t.push("/8-classroom")}),3e3)}}),!P&&4===D&&(0,x.jsx)(s.Z,{paragraphs:j,onClick:function(){N(3)},onBlock:J,onBlockBtnClick:function(){console.log("onBlockBtnClick"),0===D&&N(1)}})]}),D>0&&(0,x.jsx)(g.Z,{ref:V,triggered:I,popupLoc:z}),(0,x.jsx)(c(),{isOpen:10===D,onRequestClose:te,style:{content:{width:"50%",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",display:"flex",justifyContent:"center"}},children:2===D&&(null===(e=k[Y])||void 0===e?void 0:e.block)&&(0,x.jsx)(x.Fragment,{children:k[Y].block.img&&(0,x.jsx)(d.ZP,{src:k[Y].block.img,alt:"\u66f8\u6cd5"})})}),2===D&&(0,x.jsx)(l.Z,{onClose:function(){N(D+1),X.current()}}),1===D&&(0,x.jsx)(h.Z,{children:"\u8acb\u6416\u5f69\u8679\u65d7"})]})}},2583:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/7-rainbow",function(){return n(5009)}])},4170:function(e,t){"use strict";t.Z={src:"/_next/static/image/public/p5/b1.dcb7e891fcd296eafff1fd6136c288e0.png",height:721,width:429,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAYAAAAx8TU7AAAAs0lEQVR4nAGoAFf/AXRlZPsdJisAAgICAP3+/gDn4d4AAZ2Xm/8gKi8A7u3sABAREgDo4d0AAaaeov4JFhsBjoeB/2BmagAPBgQAAaadof0UIicC7Orp/xQVFgHv5uL/AaGYnPsiLzUE6ujm/w4QEAHs4+D/AZ+Xm/oOGR0Fsq6q/0tPUwD48OwAAZeTl/o0P0YFzcrGABgYGADj29kAAW9gYPRYUVAH3eTl/t3p7QDr4t/+xetN0cnBRu4AAAAASUVORK5CYII="}}},function(e){e.O(0,[774,887,152,715,888,179],(function(){return t=2583,e(e.s=t);var t}));var t=e.O();_N_E=t}]);